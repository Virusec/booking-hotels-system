Проектирование системы бронирования отелей  
Функциональные требования:  
Поиск отелей по локации, датам и фильтрам (звёзды, рейтинг, цена).  
Просмотр информации об отеле (фото, описание, отзывы).  
Бронирование номера на заданные даты.  
Отмена брони, возврат средств.  
Управление отелями.  
Регистрация/аутентификация пользователей и владельцев отелей.  

Нефункциональные требования:  
Масштабируемость.  
Кэширование часто запрашиваемых данных.  
Валидация пересекающихся броней.  
Высокая доступность и отказоустойчивость.  

Описание  

1. Регистрация/аутентификация пользователей и владельцев отелей.
Client App - Auth service: регистрация/логин
Auth service выдает JWT пользователя
Auth service - Kafka: Пользователь зарегистрирован
Kafka - User Service: создаётся/обновляется профиль
Client App - User Service - База данных: создаётся/обновляется профиль

2. Поиск отелей по локации, датам и фильтрам (звёзды, рейтинг, цена).
Client App - Сервис поиска: поиск по параметрам (локация, дата, фильтры)
паттерн cache-aside
Сервис поиска - Redis: проверка кэша. Если в Redis кэша нет, собираем данные
Сервис поиска - База данных: поиск по локация, дата, фильтры
Сервис поиска - Сервис доступности: по дате (есть ли свободные номера).
Сервис поиска - Redis: сохраняем результат с TTL.
Отдаём ответ: список отелей/типов номеров с краткими данными.

3. Просмотр информации об отеле (фото, описание, отзывы).
Client App - Сервис отелей - База данных: чтение информации об отеле.
Сервис отелей - Redis: проверка кэша. Если в Redis кэша нет, то в бд
Сервис отелей - База данных
Отзывы по отелю: 
Kafka - Сервис отзывов: разрешить пользователю оставить отзыв (валидация по user_id/booking_id).
Сервис отелей - Сервис отзывов - База данных

4. Бронирование номера на заданные даты.
Client App - Сервис бронирования: запрос на бронь
Сервис бронирования - Сервис доступности: проверить доступные даты и забронировать
Сервис доступности - База данных: транзакция в бд (ограничения против пересечений бронирования дат)
Сервис бронирования - Сервис оплаты
Сервис оплаты - Kafka: оплачено
Подтверждение:
Сервис бронирования - Kafka(бронирование создано) - Notification service
Notification service → Email/SMS server: отправить письмо/SMS пользователю.

5. Отмена брони, возврат средств.
Client App - Сервис бронирования: отмена по booking_id.
Сервис бронирования - Сервис оплаты: возврат
Сервис бронирования - Сервис доступности: высвобождение бронированной даты
Сервис бронирования - Kafka(отменено бронирование) - Notification service

6. Управление отелями.
Client App - Auth service: регистрация/логин
Сервис для владельцев отелей - Сервис отелей: создать/обновить отель
Сервис для владельцев отелей - Сервис доступности: корректировки по датам и тд.
